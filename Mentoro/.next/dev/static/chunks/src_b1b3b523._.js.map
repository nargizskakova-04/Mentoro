{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/quizzes/result/page.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"backBtn\": \"page-module__HZfEmG__backBtn\",\n  \"container\": \"page-module__HZfEmG__container\",\n  \"contentArea\": \"page-module__HZfEmG__contentArea\",\n  \"errorContainer\": \"page-module__HZfEmG__errorContainer\",\n  \"header\": \"page-module__HZfEmG__header\",\n  \"loadingContainer\": \"page-module__HZfEmG__loadingContainer\",\n  \"prose\": \"page-module__HZfEmG__prose\",\n  \"title\": \"page-module__HZfEmG__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/ui/Button.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"Button-module__8RiFmG__button\",\n  \"ghost\": \"Button-module__8RiFmG__ghost\",\n  \"primary\": \"Button-module__8RiFmG__primary\",\n  \"secondary\": \"Button-module__8RiFmG__secondary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/dilyarabaizova/Mentoro/Mentoro/src/components/ui/Button.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport clsx from 'clsx';\nimport styles from './Button.module.css';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n    variant?: 'primary' | 'secondary' | 'ghost';\n    children: React.ReactNode;\n}\n\nexport function Button({ variant = 'primary', className, children, ...props }: ButtonProps) {\n    return (\n        <button\n            className={clsx(styles.button, styles[variant], className)}\n            {...props}\n        >\n            {children}\n        </button>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAWO,SAAS,OAAO,EAAE,UAAU,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAoB;IACtF,qBACI,6LAAC;QACG,WAAW,IAAA,mJAAI,EAAC,2JAAM,CAAC,MAAM,EAAE,2JAAM,CAAC,QAAQ,EAAE;QAC/C,GAAG,KAAK;kBAER;;;;;;AAGb;KATgB"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/DocumentChat.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"aiMessage\": \"DocumentChat-module__a7bhfG__aiMessage\",\n  \"bounce\": \"DocumentChat-module__a7bhfG__bounce\",\n  \"container\": \"DocumentChat-module__a7bhfG__container\",\n  \"dot\": \"DocumentChat-module__a7bhfG__dot\",\n  \"header\": \"DocumentChat-module__a7bhfG__header\",\n  \"iconWrapper\": \"DocumentChat-module__a7bhfG__iconWrapper\",\n  \"input\": \"DocumentChat-module__a7bhfG__input\",\n  \"inputArea\": \"DocumentChat-module__a7bhfG__inputArea\",\n  \"loadingDots\": \"DocumentChat-module__a7bhfG__loadingDots\",\n  \"markdown\": \"DocumentChat-module__a7bhfG__markdown\",\n  \"message\": \"DocumentChat-module__a7bhfG__message\",\n  \"messageContent\": \"DocumentChat-module__a7bhfG__messageContent\",\n  \"messagesArea\": \"DocumentChat-module__a7bhfG__messagesArea\",\n  \"sendButton\": \"DocumentChat-module__a7bhfG__sendButton\",\n  \"statusIndicator\": \"DocumentChat-module__a7bhfG__statusIndicator\",\n  \"subtitle\": \"DocumentChat-module__a7bhfG__subtitle\",\n  \"title\": \"DocumentChat-module__a7bhfG__title\",\n  \"userMessage\": \"DocumentChat-module__a7bhfG__userMessage\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/dilyarabaizova/Mentoro/Mentoro/src/components/DocumentChat.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Send, Bot } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport styles from './DocumentChat.module.css';\n\ninterface Message {\n    role: 'user' | 'assistant';\n    content: string;\n}\n\ninterface DocumentChatProps {\n    initialSummary: string;\n    documentText?: string | null;\n}\n\nexport const DocumentChat = ({ initialSummary, documentText }: DocumentChatProps) => {\n    const [messages, setMessages] = useState<Message[]>(() =>\n        initialSummary.trim()\n            ? [{ role: 'assistant', content: initialSummary }]\n            : [{ role: 'assistant', content: 'No summary available. Please try again.' }]\n    );\n    const [input, setInput] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages]);\n\n    const handleSend = async (e?: React.FormEvent) => {\n        e?.preventDefault();\n        if (!input.trim() || isLoading) return;\n\n        const userMessage: Message = { role: 'user', content: input };\n        setMessages((prev) => [...prev, userMessage]);\n        setInput('');\n        setIsLoading(true);\n\n        try {\n            const chatMessages = [...messages, userMessage].map((m) => ({\n                role: m.role,\n                content: m.content,\n            }));\n\n            const response = await fetch('/api/quizzes/chat', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    messages: chatMessages,\n                    documentText: documentText || (typeof window !== 'undefined' ? sessionStorage.getItem('campusmate-document-text') : null) || undefined,\n                }),\n            });\n\n            if (!response.ok) throw new Error(response.statusText);\n\n            const reader = response.body?.getReader();\n            const decoder = new TextDecoder();\n            let aiMessageContent = '';\n\n            if (reader) {\n                setMessages((prev) => [...prev, { role: 'assistant', content: '' }]);\n\n                while (true) {\n                    const { done, value } = await reader.read();\n                    if (done) break;\n\n                    const text = decoder.decode(value);\n                    aiMessageContent += text;\n\n                    setMessages((prev) => {\n                        const newMessages = [...prev];\n                        newMessages[newMessages.length - 1] = {\n                            role: 'assistant',\n                            content: aiMessageContent,\n                        };\n                        return newMessages;\n                    });\n                }\n            }\n        } catch (error) {\n            console.error('Document chat error:', error);\n            setMessages((prev) => [\n                ...prev,\n                {\n                    role: 'assistant',\n                    content: 'Sorry, I encountered an error. Please try again later.',\n                },\n            ]);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <div className={styles.iconWrapper}>\n                    <Bot size={20} />\n                </div>\n                <div>\n                    <div className={styles.title}>Document Assistant</div>\n                    <div className={styles.subtitle}>Ask follow-up questions about the document</div>\n                </div>\n                <div className={styles.statusIndicator}>Online</div>\n            </div>\n\n            <div className={styles.messagesArea}>\n                {messages.map((msg, index) => (\n                    <div\n                        key={index}\n                        className={`${styles.message} ${msg.role === 'user' ? styles.userMessage : styles.aiMessage}`}\n                    >\n                        <div className={styles.messageContent}>\n                            {msg.role === 'assistant' ? (\n                                <div className={styles.markdown}>\n                                    <ReactMarkdown>\n                                        {msg.content?.trim() ? msg.content : 'No response received.'}\n                                    </ReactMarkdown>\n                                </div>\n                            ) : (\n                                msg.content\n                            )}\n                        </div>\n                    </div>\n                ))}\n                {isLoading && messages[messages.length - 1]?.role === 'user' && (\n                    <div className={`${styles.message} ${styles.aiMessage}`}>\n                        <div className={styles.loadingDots}>\n                            <div className={styles.dot}></div>\n                            <div className={styles.dot}></div>\n                            <div className={styles.dot}></div>\n                        </div>\n                    </div>\n                )}\n                <div ref={messagesEndRef} />\n            </div>\n\n            <form className={styles.inputArea} onSubmit={handleSend}>\n                <input\n                    type=\"text\"\n                    className={styles.input}\n                    placeholder=\"Ask about the document...\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    disabled={isLoading}\n                />\n                <button\n                    type=\"submit\"\n                    className={styles.sendButton}\n                    disabled={!input.trim() || isLoading}\n                >\n                    <Send size={20} />\n                </button>\n            </form>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 395, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/components/QuizPlayer.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"checkIcon\": \"QuizPlayer-module__GNIRcq__checkIcon\",\n  \"container\": \"QuizPlayer-module__GNIRcq__container\",\n  \"correct\": \"QuizPlayer-module__GNIRcq__correct\",\n  \"crossIcon\": \"QuizPlayer-module__GNIRcq__crossIcon\",\n  \"empty\": \"QuizPlayer-module__GNIRcq__empty\",\n  \"explanation\": \"QuizPlayer-module__GNIRcq__explanation\",\n  \"incorrect\": \"QuizPlayer-module__GNIRcq__incorrect\",\n  \"nextBtn\": \"QuizPlayer-module__GNIRcq__nextBtn\",\n  \"option\": \"QuizPlayer-module__GNIRcq__option\",\n  \"optionLetter\": \"QuizPlayer-module__GNIRcq__optionLetter\",\n  \"optionText\": \"QuizPlayer-module__GNIRcq__optionText\",\n  \"options\": \"QuizPlayer-module__GNIRcq__options\",\n  \"progress\": \"QuizPlayer-module__GNIRcq__progress\",\n  \"progressBar\": \"QuizPlayer-module__GNIRcq__progressBar\",\n  \"progressFill\": \"QuizPlayer-module__GNIRcq__progressFill\",\n  \"progressText\": \"QuizPlayer-module__GNIRcq__progressText\",\n  \"question\": \"QuizPlayer-module__GNIRcq__question\",\n  \"result\": \"QuizPlayer-module__GNIRcq__result\",\n  \"resultIcon\": \"QuizPlayer-module__GNIRcq__resultIcon\",\n  \"resultScore\": \"QuizPlayer-module__GNIRcq__resultScore\",\n  \"resultTitle\": \"QuizPlayer-module__GNIRcq__resultTitle\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///Users/dilyarabaizova/Mentoro/Mentoro/src/components/QuizPlayer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronRight, Check, X, Award } from 'lucide-react';\nimport { Button } from '@/components/ui/Button';\nimport styles from './QuizPlayer.module.css';\n\nexport interface Question {\n    question: string;\n    options: string[];\n    correctAnswer: string;\n    explanation: string;\n}\n\ninterface QuizPlayerProps {\n    questions: Question[];\n}\n\nexport const QuizPlayer = ({ questions }: QuizPlayerProps) => {\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const [selectedAnswer, setSelectedAnswer] = useState<string | null>(null);\n    const [showResult, setShowResult] = useState(false);\n    const [score, setScore] = useState(0);\n    const [isComplete, setIsComplete] = useState(false);\n\n    const question = questions[currentIndex];\n    const isLastQuestion = currentIndex === questions.length - 1;\n\n    const handleSelectOption = (option: string) => {\n        if (showResult) return;\n\n        setSelectedAnswer(option);\n        setShowResult(true);\n        if (option === question.correctAnswer) {\n            setScore((prev) => prev + 1);\n        }\n    };\n\n    const handleNext = () => {\n        if (isLastQuestion) {\n            setIsComplete(true);\n        } else {\n            setCurrentIndex((prev) => prev + 1);\n            setSelectedAnswer(null);\n            setShowResult(false);\n        }\n    };\n\n    const handleRetry = () => {\n        setCurrentIndex(0);\n        setSelectedAnswer(null);\n        setShowResult(false);\n        setScore(0);\n        setIsComplete(false);\n    };\n\n    if (!questions || questions.length === 0) {\n        return (\n            <div className={styles.empty}>\n                <p>No questions available. Please try again.</p>\n            </div>\n        );\n    }\n\n    if (isComplete) {\n        const percentage = Math.round((score / questions.length) * 100);\n        return (\n            <div className={styles.result}>\n                <div className={styles.resultIcon}>\n                    <Award size={48} color=\"#4318FF\" />\n                </div>\n                <h3 className={styles.resultTitle}>Quiz Complete!</h3>\n                <p className={styles.resultScore}>\n                    You scored {score} out of {questions.length} ({percentage}%)\n                </p>\n                <Button variant=\"primary\" onClick={handleRetry}>\n                    Try Again\n                </Button>\n            </div>\n        );\n    }\n\n    const getOptionClass = (option: string) => {\n        if (!showResult) return styles.option;\n        if (option === question.correctAnswer) return `${styles.option} ${styles.correct}`;\n        if (option === selectedAnswer && option !== question.correctAnswer) {\n            return `${styles.option} ${styles.incorrect}`;\n        }\n        return styles.option;\n    };\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.progress}>\n                <span className={styles.progressText}>\n                    Question {currentIndex + 1} of {questions.length}\n                </span>\n                <div className={styles.progressBar}>\n                    <div\n                        className={styles.progressFill}\n                        style={{ width: `${((currentIndex + 1) / questions.length) * 100}%` }}\n                    />\n                </div>\n            </div>\n\n            <h3 className={styles.question}>{question.question}</h3>\n\n            <div className={styles.options}>\n                {question.options.map((option, idx) => (\n                    <button\n                        key={idx}\n                        className={getOptionClass(option)}\n                        onClick={() => handleSelectOption(option)}\n                        disabled={showResult}\n                    >\n                        <span className={styles.optionLetter}>{String.fromCharCode(65 + idx)}.</span>\n                        <span className={styles.optionText}>{option}</span>\n                        {showResult && option === question.correctAnswer && (\n                            <Check size={18} className={styles.checkIcon} />\n                        )}\n                        {showResult && option === selectedAnswer && option !== question.correctAnswer && (\n                            <X size={18} className={styles.crossIcon} />\n                        )}\n                    </button>\n                ))}\n            </div>\n\n            {showResult && (\n                <div className={styles.explanation}>\n                    <strong>Explanation:</strong> {question.explanation}\n                </div>\n            )}\n\n            {showResult && (\n                <Button\n                    variant=\"primary\"\n                    onClick={handleNext}\n                    className={styles.nextBtn}\n                >\n                    {isLastQuestion ? 'See Results' : 'Next Question'}\n                    <ChevronRight size={18} />\n                </Button>\n            )}\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///Users/dilyarabaizova/Mentoro/Mentoro/src/app/dashboard/quizzes/result/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, Suspense } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { ArrowLeft, Loader2, RefreshCw } from 'lucide-react';\nimport styles from './page.module.css';\nimport { Button } from '@/components/ui/Button';\nimport { DocumentChat } from '@/components/DocumentChat';\nimport { QuizPlayer, Question } from '@/components/QuizPlayer';\n\nfunction ResultContent() {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const type = searchParams.get('type');\n    const [summary, setSummary] = useState('');\n    const [questions, setQuestions] = useState<Question[]>([]);\n    const [documentText, setDocumentText] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        if (typeof window !== 'undefined') {\n            setDocumentText(sessionStorage.getItem('campusmate-document-text'));\n        }\n    }, []);\n\n    useEffect(() => {\n        if (!type) {\n            router.push('/dashboard/quizzes');\n            return;\n        }\n\n        const fetchData = async () => {\n            try {\n                const docText = typeof window !== 'undefined' ? sessionStorage.getItem('campusmate-document-text') : null;\n\n                const response = await fetch('/api/quizzes/generate', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ type, documentText: docText }),\n                });\n\n                if (!response.ok) throw new Error('Generation failed');\n\n                if (type === 'explain') {\n                    const reader = response.body?.getReader();\n                    if (!reader) throw new Error('No body');\n                    const decoder = new TextDecoder();\n                    let fullText = '';\n\n                    while (true) {\n                        const { done, value } = await reader.read();\n                        if (done) break;\n                        const chunk = decoder.decode(value, { stream: true });\n                        fullText += chunk;\n                        setSummary((prev) => prev + chunk);\n                    }\n                    setSummary(fullText);\n                    setIsLoading(false);\n\n                } else if (type === 'quiz') {\n                    // For quiz, we need to wait for the full stream to parse JSON\n                    // Or ideally, the API should just return JSON for quiz if we aren't streaming.\n                    // Since existing API streams, let's accumulate and parse.\n                    const reader = response.body?.getReader();\n                    if (!reader) throw new Error('No body');\n                    const decoder = new TextDecoder();\n                    let fullText = '';\n\n                    while (true) {\n                        const { done, value } = await reader.read();\n                        if (done) break;\n                        fullText += decoder.decode(value, { stream: true });\n                    }\n\n                    try {\n                        const parsed = JSON.parse(fullText);\n                        setQuestions(parsed);\n                        setIsLoading(false);\n                    } catch (e) {\n                        console.error(\"JSON Parse Error\", e);\n                        console.log(\"Raw LLM Output:\", fullText); // Log raw output for debugging\n\n                        // Attempt to extract JSON from code blocks or raw text\n                        const jsonMatch = fullText.match(/```json\\n([\\s\\S]*?)\\n```/) ||\n                            fullText.match(/```\\n([\\s\\S]*?)\\n```/) ||\n                            fullText.match(/\\[\\s*\\{[\\s\\S]*\\}\\s*\\]/); // Try to find array bracket pattern\n\n                        if (jsonMatch) {\n                            try {\n                                const extracted = jsonMatch[1] || jsonMatch[0];\n                                setQuestions(JSON.parse(extracted));\n                                setIsLoading(false);\n                            } catch (jsonErr) {\n                                console.error(\"Failed to parse extracted JSON\", jsonErr);\n                                throw new Error('Failed to parse quiz data');\n                            }\n                        } else {\n                            throw new Error('Failed to parse quiz data. Output was not valid JSON.');\n                        }\n                    }\n                }\n\n            } catch (err) {\n                console.error(err);\n                setError('Failed to generate content. Please try again.');\n                setIsLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [type, router]);\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <Button variant=\"ghost\" onClick={() => router.back()} className={styles.backBtn}>\n                    <ArrowLeft size={20} />\n                    Back\n                </Button>\n                <h2 className={styles.title}>\n                    {type === 'explain' ? 'Document Assistant' : 'Interactive Quiz'}\n                </h2>\n                <div className={styles.actions}>\n                    {/* Actions can go here */}\n                </div>\n            </div>\n\n            <div className={styles.contentArea}>\n                {isLoading && (\n                    <div className={styles.loadingContainer}>\n                        <Loader2 className=\"animate-spin\" size={48} color=\"#4318FF\" />\n                        <p>Analysing document & generating {type === 'explain' ? 'explanation' : 'quiz'}...</p>\n                    </div>\n                )}\n\n                {error && (\n                    <div className={styles.errorContainer}>\n                        <p>{error}</p>\n                        <Button onClick={() => window.location.reload()}>\n                            <RefreshCw size={16} /> Retry\n                        </Button>\n                    </div>\n                )}\n\n                {!isLoading && !error && (\n                    <>\n                        {type === 'explain' && (\n                            <DocumentChat\n                                initialSummary={summary}\n                                documentText={documentText}\n                            />\n                        )}\n                        {type === 'quiz' && <QuizPlayer questions={questions} />}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default function ResultPage() {\n    return (\n        <Suspense fallback={<div>Loading...</div>}>\n            <ResultContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}